<div class="meeting-create-container">
  <div class="header">
    <h1>Neues Meeting erstellen</h1>
    <button class="btn btn-secondary" (click)="navigateBack()">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1e293b"><path d="M360-240 120-480l240-240 56 56-144 144h568v80H272l144 144-56 56Z"/></svg>
      Zurück zur Liste
    </button>
  </div>

  <div class="card fade-in">
    <form [formGroup]="meetingForm" (ngSubmit)="onSubmit()" class="meeting-form">
      @if (errorMessage()) {
        <div class="error-message">
          <strong>
          <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#1e293b"><path d="M479.79-288q15.21 0 25.71-10.29t10.5-25.5q0-15.21-10.29-25.71t-25.5-10.5q-15.21 0-25.71 10.29t-10.5 25.5q0 15.21 10.29 25.71t25.5 10.5ZM444-432h72v-240h-72v240Zm36.28 336Q401-96 331-126t-122.5-82.5Q156-261 126-330.96t-30-149.5Q96-560 126-629.5q30-69.5 82.5-122T330.96-834q69.96-30 149.5-30t149.04 30q69.5 30 122 82.5T834-629.28q30 69.73 30 149Q864-401 834-331t-82.5 122.5Q699-156 629.28-126q-69.73 30-149 30Zm-.28-72q130 0 221-91t91-221q0-130-91-221t-221-91q-130 0-221 91t-91 221q0 130 91 221t221 91Zm0-312Z"/></svg>
          Fehler:</strong> {{ errorMessage() }}
        </div>
      }

      <div class="form-group">
        <label for="title">
        <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#1e293b"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg>
          Meeting-Titel *
        </label>
        <input
          type="text"
          id="title"
          formControlName="title"
          class="form-control"
          [class.error]="isFieldInvalid('title')"
          placeholder="z.B. Weekly Team Meeting"
        />
        @if (getFieldError('title')) {
          <div class="field-error">
            {{ getFieldError("title") }}
          </div>
        }
      </div>

      <div class="form-group">
        <label for="content">
        <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#1e293b"><path d="M240-320h320v-80H240v80Zm400 0h80v-80h-80v80ZM240-480h80v-80h-80v80Zm160 0h320v-80H400v80ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-480H160v480Zm0 0v-480 480Z"/></svg>
          Meeting-Protokoll *
        </label>
        <textarea
          id="content"
          formControlName="content"
          class="form-control"
          [class.error]="isFieldInvalid('content')"
          rows="12"
          placeholder="Fügen Sie hier den Inhalt Ihres Meeting-Protokolls ein...
• Anwesende Personen
• Diskutierte Themen
• Action Items"
        ></textarea>
        @if (getFieldError('content')) {
          <div class="field-error">
            {{ getFieldError("content") }}
          </div>
        }
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="navigateBack()"
          [disabled]="isSubmitting()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1e293b"><path d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
          Abbrechen
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="isSubmitting() || meetingForm.invalid"
        >
          @if (isSubmitting()) {
            <span class="loading-spinner-small"></span>
          }
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>
          {{ isSubmitting() ? "Wird analysiert..." : "Meeting analysieren" }}
        </button>
      </div>
    </form>
  </div>
</div>
